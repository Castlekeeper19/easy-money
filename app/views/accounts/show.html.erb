<%= render 'accounts/navbar' %>

<div class="container">
<h1 class ="mt-3"> Account Name: <%= @account.name %> </h1>
<h2> Account Balance:  $<%= @account.account_balance %> </h2>
<p> Account Type: <%= @account.account_type %> </p>



<%= link_to "Add a holding", new_account_holding_path(@account)  %>
<%= link_to "Add a goal", new_account_goal_path(@account)  %>


<table class="table table-striped table-dark">
  <thead class="">
    <tr>
      <th scope="col">*</th>
      <th scope="col">Ticker</th>
      <th scope="col">Stock Price</th>
      <th scope="col">Shares</th>
      <th scope="col">Balance</th>
      <th scope="col">Edit</th>
      <th scope="col">Remove</th>
    </tr>
  </thead>
  <tbody>
    <% @account.stocks.each do |stock| %>
    <tr>
      <th scope="row">*</th>
      <td><%= stock.ticker %></td>
      <td>$<%= stock.stock_price %></td>
      <% stock.holdings.each do |holding| %>
      <td><%= holding.shares %></td>
      <td>$<%= holding.stock_balance %></td>
      <td><%= link_to "Edit", edit_account_holding_path(holding)  %></td>
      <td><%= link_to "Remove", holding_path(holding.id), method: :delete,  data: { confirm: 'Do you want to delete?' }  %></td>
    <% end %>
    </tr>

   <% end %>
  </tbody>
</table>


<% @account.goals.each do |goal| %>
<div class ="card_stock flex-column">
<p> Name: <%= goal.name%> </p>
<p> Current: <%= goal.goal_balance.round(2)%> </p>
<p> Goal: <%= goal.goal_amount.round(2)%> </p>
<p> Complete By: <%= goal.end_date%> </p>
<p> Completed: <%= goal.completed%> </p>

</div>
<% end %>
</div>
